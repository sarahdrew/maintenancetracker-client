(window.webpackJsonpmaintenancetracker=window.webpackJsonpmaintenancetracker||[]).push([[0],{24:function(e,t,a){e.exports=a(47)},29:function(e,t,a){},30:function(e,t,a){e.exports=a.p+"static/media/hammer-icon.4d95127b.png"},31:function(e,t,a){e.exports=a.p+"static/media/tracker-gif.e6d0bc3b.png"},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){e.exports=a.p+"static/media/tracker1.12ed23d8.PNG"},42:function(e,t,a){e.exports=a.p+"static/media/tracker2.b297c7c8.PNG"},43:function(e,t,a){e.exports=a.p+"static/media/tracker-completed.349cdf0a.png"},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),c=a.n(s),o=a(1),i=a(2),l=a(4),u=a(3),m=a(5),d=a(12),p=(a(29),a(6)),h=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"headline"},r.a.createElement("div",{className:"icon-image"},r.a.createElement("img",{src:a(30),alt:"maintenancetracker logo"}),r.a.createElement("h2",null,"MaintenanceTracker")),r.a.createElement("h3",null,"A space for landlords and tenants to communicate efficiently"),r.a.createElement("h4",null,"Tenants submit requests, landlords update progress."),r.a.createElement("div",{className:"trackergif"},r.a.createElement("img",{src:a(31),alt:"maintenancetracker gif"}))),r.a.createElement("div",{className:"LandingPage"},r.a.createElement("div",{className:"explanation"},"How to get started:",r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/register"},"Register for an account")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/sign-in"},"Sign in with account credentials")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/create-request"}," Create a request "))),r.a.createElement("b",null,"To get started using a demo, head to the sign in page and use the demo credentials."))))}}]),t}(n.Component),f={API_ENDPOINT:"https://maintenancetracker-server.herokuapp.com",TOKEN_KEY:"tokenKey"},E={saveAuthToken:function(e){window.localStorage.setItem(f.TOKEN_KEY,e)},getAuthToken:function(){return window.localStorage.getItem(f.TOKEN_KEY)},clearAuthToken:function(){window.localStorage.removeItem(f.TOKEN_KEY)},hasAuthToken:function(){return!!E.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},v=E,b={getAllRequests:function(){return fetch("".concat(f.API_ENDPOINT,"/api/requests")).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return e}).then(function(e){return e})},getRequest:function(e){return fetch("".concat(f.API_ENDPOINT,"/api/requests/").concat(e),{headers:{authorization:"basic ".concat(v.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return e}).then(function(e){return e})}},g=r.a.createContext(),q=(a(37),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("h2",null,"LOADING . . . "))}}]),t}(n.Component)),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.getAllRequests().then(function(t){e.context.setRequests(t),e.setState({loading:!1})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){return this.state.loading?r.a.createElement(q,null):r.a.createElement("div",{className:"total-request-item"},r.a.createElement("div",{className:"request-content"},r.a.createElement("header",{className:"totalRequestItem__header"},r.a.createElement("h2",null," All requests for landlord:")),this.context.requests.map(function(e,t){return r.a.createElement("div",{key:t,className:"requests"},r.a.createElement("p",null,r.a.createElement(p.c,{to:"/requests/".concat(e.id),activeStyle:{color:"green"}}," Request Title: ",e.title)),r.a.createElement("p",null,e.description))})))}}]),t}(n.Component);j.contextType=g;var O={postUser:function(e){return fetch("".concat(f.API_ENDPOINT,"/api/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return e})},postLogin:function(e){var t=e.email,a=e.password;return fetch("".concat(f.API_ENDPOINT,"/api/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:a})}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return v.saveAuthToken(e.authToken),e}).catch(function(e){return e})},postRefreshToken:function(){return fetch("".concat(f.API_ENDPOINT,"/api/auth/refresh"),{method:"POST",headers:{authorization:"Bearer ".concat(v.getAuthToken())}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){return v.saveAuthToken(e.authToken),v.queueCallbackBeforeExpiry(function(){O.postRefreshToken()}),e}).catch(function(e){console.error(e)})}},N=O,y=(a(38),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},a.handleSubmit=function(e){e.preventDefault();var t=e.target,n=t.full_name,r=t.email,s=t.password,c=t.landlord_tenant;a.setState({error:null}),N.postUser({email:r.value,password:s.value,full_name:n.value,landlord_tenant:c.value}).then(function(e){n.value="",r.value="",s.value="",c.value="",a.props.onRegistrationSuccess(),a.props.history.push("/sign-in")}).catch(function(e){a.setState({error:e.error})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"headline"},r.a.createElement("h3",null,"Register for an account")),r.a.createElement("div",{className:"total-registration-form"},r.a.createElement("form",{className:"RegistrationForm",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"alert",role:"alert"},e&&r.a.createElement("p",{className:"red"},Object.keys(e))),r.a.createElement("div",{className:"choice"},"I am a ..."),r.a.createElement("div",{className:"landlord_tenant"},r.a.createElement("div",{className:"landlord-radio"},r.a.createElement("label",{htmlFor:"landlord_tenant"},"Landlord   "),r.a.createElement("input",{type:"radio",name:"landlord_tenant",required:!0,id:"RegistrationForm__landlord",value:"landlord"})),r.a.createElement("div",{className:"tenant-radio"},r.a.createElement("label",{htmlFor:"tenant_tenant"},"       Tenant"),r.a.createElement("input",{type:"radio",name:"landlord_tenant",required:!0,id:"RegistrationForm__tenant",value:"tenant"}))),r.a.createElement("div",{className:"full_name"},r.a.createElement("label",{htmlFor:"RegistrationForm__full_name"},"Full name"),r.a.createElement("input",{type:"text",name:"full_name",required:!0,id:"RegistrationForm__full_name"})),r.a.createElement("div",{className:"email"},r.a.createElement("label",{htmlFor:"RegistrationForm__email"},"Email"),r.a.createElement("input",{type:"text",name:"email",required:!0,id:"RegistrationForm__email"})),r.a.createElement("div",{className:"password-explanation"},r.a.createElement("p",null,"Password must be at least 8 characters long, contain a special character, one upper case letter and one lower case letter.")),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"RegistrationForm__password"},"Password"),r.a.createElement("input",{type:"password",name:"password",required:!0,id:"RegistrationForm__password"})),r.a.createElement("button",{type:"submit"}," Register"))))}}]),t}(n.Component));y.defaultProps={onRegistrationSuccess:function(){}};var k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},a.handleSubmitBasicAuth=function(e){e.preventDefault();var t=e.target,n=t.email,r=t.password;v.saveAuthToken(v.makeBasicAuthToken(n.value,r.value)),N.postLogin({email:n.value,password:r.value}).then(function(e){n.value="",r.value="",e.hasOwnProperty("error")?a.setState({error:e.error}):(a.props.onSigninSuccess(),a.setState({isSignedIn:!0}),a.props.history.push("/signed-in"))}).catch(function(e){})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"demo-explanation"},r.a.createElement("p",null,"For a demo, use the following credentials:"),r.a.createElement("p",null,"email: demo@maintenancetracker.com"),r.a.createElement("p",null,"Password: Demo123!"),r.a.createElement("p",null,"Otherwise, sign in with your registered information.")),r.a.createElement("form",{className:"SigninForm",onSubmit:this.handleSubmitBasicAuth},r.a.createElement("div",{className:"alert ",role:"alert"},e&&r.a.createElement("p",{className:"red"},e)),r.a.createElement("div",{className:"email"},r.a.createElement("label",{htmlFor:"SigninForm__email"},"Email"),r.a.createElement("input",{type:"text",required:!0,name:"email",id:"SigninForm__email"})),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"SigninForm__password"},"Password"),r.a.createElement("input",{required:!0,name:"password",type:"password",id:"SigninForm__password"})),r.a.createElement("button",{type:"submit"},"Sign In")))}}]),t}(n.Component);k.defaultProps={onSigninSuccess:function(){},isSignedIn:!1};var S=a(23),w=r.a.createContext({requests:[],addRequest:function(){},updateRequests:function(){}}),T=a(22);function _(e){var t=e.className,a=Object(T.a)(e,["className"]);return r.a.createElement("form",Object.assign({className:["Requests-form",t].join(" "),action:"#"},a))}a(39);var R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).addRequest=function(e){a.setState({requests:[].concat(Object(S.a)(a.state.request),[e])})},a.handleSubmit=function(e){e.preventDefault();var t={title:e.target.title.value,description:e.target.description.value};fetch("".concat(f.API_ENDPOINT,"/api/requests"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"bearer ".concat(v.getAuthToken())},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){a.context.addRequest(e),a.props.history.push("/requests/".concat(e.id))}).catch(function(e){console.error({error:e})})},a.state={title:"",description:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"updateRequests",value:function(e,t){this.setState({title:e,description:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"create-request"},r.a.createElement("h1",null,"Create a request"),r.a.createElement("p",null,"You can create your request as a signed-in user. Enter in your request below."),r.a.createElement("div",{className:"request-not-working"}," Request not sending? Make sure you've registered for an account and signed in."),r.a.createElement(_,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{placeholder:"Leaky faucet",type:"text",name:"title",id:"title",onChange:function(t){return e.updateRequests(t.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("input",{type:"text",name:"description",id:"description",placeholder:"Faucet in the bathroom leaks when tap is off",onChange:function(t){return e.updateRequests(t.target.value)}})),r.a.createElement("button",{type:"submit",onSubmit:this.handleSubmit},"Send my request")))}}]),t}(n.Component);R.defaultProps={history:{push:function(){}}},R.contextType=w;var P=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signed-in"},r.a.createElement("h2",null,"Successfully signed in!"),r.a.createElement(p.b,{to:"/requests"},"View all requests for landlord")," |",r.a.createElement(p.b,{to:"/create-request"}," Create a request "))}}]),t}(n.Component),A=(a(40),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return!0===v.hasAuthToken()?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Nav"},r.a.createElement("div",{className:"links"},r.a.createElement(p.b,{to:"/"},"Home"),"  |",r.a.createElement(p.b,{to:"/requests"}," All Requests")," |",r.a.createElement(p.b,{to:"/create-request"}," Create Request")," |",r.a.createElement(p.b,{to:"/logout",onClick:function(t){t.preventDefault(),v.clearAuthToken(),e.props.history.push("/")}}," Logout")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Nav"},r.a.createElement("div",{className:"links"},r.a.createElement(p.b,{to:"/"},"Home"),"  |",r.a.createElement(p.b,{to:"/register"}," Register ")," |",r.a.createElement(p.b,{to:"sign-in"}," Sign In "))))}}]),t}(n.Component)),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:"",status:"",message:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return"received"===this.context.request.status?r.a.createElement("img",{src:a(41),alt:"trackerfor request received",width:"200"}):"started"===this.context.request.status?r.a.createElement("img",{src:a(42),alt:"tracker for request started",width:"200"}):"completed"===this.context.request.status?r.a.createElement("img",{src:a(43),alt:"tracker for request completed",width:"200"}):r.a.createElement(r.a.Fragment,null)}}]),t}(n.Component);x.defaultProps={match:{params:{}}},x.contextType=g;a(44);var F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t={title:a.context.request.title,description:a.context.request.description,status:e.target.status.value,message:e.target.message.value,id:a.context.request.id};fetch("".concat(f.API_ENDPOINT,"/api/requests/").concat(a.context.request.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"bearer ".concat(v.getAuthToken())},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(e){a.updateRequests(e),a.props.history.push("/thank-you")}).catch(function(e){console.error({error:e})})},a.state={title:"",description:"",status:"",message:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"updateRequests",value:function(e){this.setState({title:e[0].title,description:e[0].description,status:e[0].status,message:e[0].message})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.requestsId;b.getRequest(t).then(function(t){return e.context.setRequest(t)}).catch(function(e){return console.error(e)})}},{key:"renderRequest",value:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"total-request-item"},r.a.createElement("div",{className:"request-info"},r.a.createElement("b",null," Title: "),e.title,r.a.createElement("p",null," ",r.a.createElement("b",null,"Description: "),e.description),"Message: ",e.message,e.status&&r.a.createElement("div",{className:"status-image"},r.a.createElement("p",null,"Current status: ",e.status),r.a.createElement("p",null,r.a.createElement(x,null)))),r.a.createElement("div",{className:"status-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"just-status"},r.a.createElement("div",{className:"whats-the-status"},r.a.createElement("label",{htmlFor:"status"},"What's the status?")),r.a.createElement("div",{className:"status-received"},r.a.createElement("input",{type:"radio",name:"status",value:"received"}),"  received"),r.a.createElement("div",{className:"status-start"},r.a.createElement("input",{type:"radio",name:"status",value:"started"}),"  started"),r.a.createElement("div",{className:"status-completed"},r.a.createElement("input",{type:"radio",name:"status",value:"completed"}),"  completed")),r.a.createElement("div",{className:"message"},r.a.createElement("label",{htmlFor:"message"},"Message about request"),r.a.createElement("input",{type:"text",name:"message",placeholder:"None for now"}),r.a.createElement("button",{type:"submit"}," Update progress"))))))}},{key:"render",value:function(){var e,t=this.context.request;return e=void 0===t?r.a.createElement("div",{className:"loading"}):""===this.state.title?this.renderRequest(t):this.renderRequest(this.state),r.a.createElement("div",{className:"request-page"},e)}}]),t}(n.Component);F.defaultProps={match:{params:{}}},F.contextType=g;var I=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signed-in"},r.a.createElement("h2",null,"Your Request has been sent"),r.a.createElement(p.b,{to:"/requests/:/requestsId"}," Check on or update the status of your request "))}}]),t}(n.Component);I.defaultProps={match:{params:{}}},I.contextType=g;var C=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"signed-in"},r.a.createElement("h2",null,"Thanks for submitting an update!"),r.a.createElement(p.b,{to:"/requests"},"Back to all requests")," |",r.a.createElement(p.b,{to:"/create-request"}," Create a request "))}}]),t}(n.Component),D=(a(45),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={requests:[],request:"",isSignedIn:!1,setRequest:function(t){e.setState({request:t})},setRequests:function(t){e.setState({requests:t})},updateRequests:function(t){e.setState({request:t})}},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g.Provider,{value:this.state},r.a.createElement("nav",null," ",r.a.createElement(d.a,{path:"/",component:A})),r.a.createElement("main",{className:"App"},r.a.createElement(d.a,{exact:!0,path:"/",component:h}),r.a.createElement(d.a,{exact:!0,path:"/requests",component:j}),r.a.createElement(d.a,{path:"/register",component:y}),r.a.createElement(d.a,{path:"/sign-in",component:k}),r.a.createElement(d.a,{path:"/create-request",component:R}),r.a.createElement(d.a,{path:"/signed-in",component:P}),r.a.createElement(d.a,{path:"/requests/:requestsId",component:F}),r.a.createElement(d.a,{path:"/request-sent",component:I}),r.a.createElement(d.a,{path:"/thank-you",component:C}))))}}]),t}(n.Component));a(46);c.a.render(r.a.createElement(function(){return r.a.createElement(p.a,null,r.a.createElement(D,null))},null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.9eb58c72.chunk.js.map